# ‚ö° generator_bot

Telegram-–±–æ—Ç –¥–ª—è –≤–µ–¥–µ–Ω–Ω—è —Ä–æ–±–æ—Ç–∏ –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä–∞: –∑–º—ñ–Ω–∏, –ø–∞–ª–∏–≤–æ, –≥—Ä–∞—Ñ—ñ–∫–∏ –≤—ñ–¥–∫–ª—é—á–µ–Ω—å, –∞–¥–º—ñ–Ω-—Ñ—É–Ω–∫—Ü—ñ—ó —Ç–∞ —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—è –∑ Google Sheets. [cite:26]

---

## ‚ú® –ú–æ–∂–ª–∏–≤–æ—Å—Ç—ñ
- üïí **–ó–º—ñ–Ω–∏**: –ø–æ—Å–ª—ñ–¥–æ–≤–Ω—ñ `m/d/e` (—Ä–∞–Ω–æ–∫/–¥–µ–Ω—å/–≤–µ—á—ñ—Ä) + `x` (–µ–∫—Å—Ç—Ä–∞), —Å—Ç–∞—Ä—Ç/—Å—Ç–æ–ø –∑ –ª–æ–≥—É–≤–∞–Ω–Ω—è–º –ø–æ–¥—ñ–π. [cite:26]
- üßæ –†–∞–Ω–∫–æ–≤–∏–π –±—Ä–∏—Ñ—ñ–Ω–≥ —É `BRIEF_TIME` (—é–∑–µ—Ä–∞–º, –Ω–µ –∞–¥–º—ñ–Ω–∞–º): –≥—Ä–∞—Ñ—ñ–∫ –≤—ñ–¥–∫–ª—é—á–µ–Ω—å –Ω–∞ —Å—å–æ–≥–æ–¥–Ω—ñ, –ø–∞–ª–∏–≤–æ/–∑–∞–ª–∏—à–æ–∫ —É –≥–æ–¥–∏–Ω–∞—Ö, –¥–æ –¢–û, –ø—ñ–¥—Å—É–º–æ–∫ —É—á–æ—Ä–∞—à–Ω—ñ—Ö –∑–º—ñ–Ω. [cite:26]
- ‚è±Ô∏è –ê–≤—Ç–æ-–∑–∞–∫—Ä–∏—Ç—Ç—è –∑–º—ñ–Ω–∏ –æ `WORK_END` (—è–∫—â–æ —Å—Ç–∞–Ω –ª–∏—à–∏–≤—Å—è `ON`) + —Å–ø–æ–≤—ñ—â–µ–Ω–Ω—è –∞–¥–º—ñ–Ω–∞–º. [cite:26]
- üîî –ù–∞–≥–∞–¥—É–≤–∞–Ω–Ω—è –∞–¥–º—ñ–Ω–∞–º –Ω–∞—Ç–∏—Å–Ω—É—Ç–∏ ¬´–°–¢–û–ü¬ª –∑–∞ `STOP_REMINDER_MIN` —Ö–≤ –¥–æ `WORK_END`, —è–∫—â–æ –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä —â–µ `ON`. [cite:26]
- ‚õΩ –ê–ª–µ—Ä—Ç–∏ –ø–æ –ø–∞–ª–∏–≤—É –∞–¥–º—ñ–Ω–∞–º: –Ω–∏–∂—á–µ `FUEL_ALERT_THRESHOLD`, –∞–Ω—Ç–∏-—Å–ø–∞–º `FUEL_ALERT_COOLDOWN_MIN`, –∫–Ω–æ–ø–∫–∞ ¬´–ü–∞–ª–∏–≤–æ –∑–∞–º–æ–≤–ª–µ–Ω–æ¬ª. [cite:26]
- üìä Google Sheets sync: –æ–∫—Ä–µ–º–∞ –≤–∫–ª–∞–¥–∫–∞ –∂—É—Ä–Ω–∞–ª—É –ø–æ–¥—ñ–π `LOGS_SHEET_NAME` –∑ idempotent-–∑–∞–ø–∏—Å–æ–º (1 `log_id` = 1 —Ä—è–¥–æ–∫). [cite:26]
- üßÆ –ó–∞–ø—Ä–∞–≤–∫–∏ (refill): idempotent-–∞–≥—Ä–µ–≥–∞—Ü—ñ—è –∑–∞ –¥–∞—Ç—É (—Å—É–º–∞ –ª—ñ—Ç—Ä—ñ–≤ + —á–µ–∫–∏ + –≤–æ–¥—ñ—ó). [cite:26]
- üïµÔ∏è‚Äç‚ôÇÔ∏è –ü–∞—Ä—Å–µ—Ä –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å –î–¢–ï–ö: –∞–¥–º—ñ–Ω –Ω–∞–¥—Å–∏–ª–∞—î —Ç–µ–∫—Å—Ç ‚Äî –±–æ—Ç –ø—Ä–æ–ø–æ–Ω—É—î –∑–∞—Å—Ç–æ—Å—É–≤–∞—Ç–∏ –∑–Ω–∞–π–¥–µ–Ω—ñ –¥—ñ–∞–ø–∞–∑–æ–Ω–∏ –≤—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è. [cite:26]

---

## üß∞ –°—Ç–µ–∫ —Ç–∞ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ
–í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π:

```bash
pip install -r requirements.txt
```

–ü—Ä–æ—î–∫—Ç –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î `aiogram` (v3), `aiohttp`, `gspread` —Ç–∞ `google-auth*`, –∞ —Ç–∞–∫–æ–∂ `python-dotenv`, `pytz`, `pandas`, `openpyxl`. [cite:26]

---

## üöÄ –®–≤–∏–¥–∫–∏–π —Å—Ç–∞—Ä—Ç
1. –°—Ç–≤–æ—Ä—ñ—Ç—å —ñ –∞–∫—Ç–∏–≤—É–π—Ç–µ –≤—ñ—Ä—Ç—É–∞–ª—å–Ω–µ –æ—Ç–æ—á–µ–Ω–Ω—è.
2. –í—Å—Ç–∞–Ω–æ–≤—ñ—Ç—å –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ.
3. –ü—ñ–¥–≥–æ—Ç—É–π—Ç–µ `.env` —ñ `service_account.json`.
4. –ó–∞–ø—É—Å—Ç—ñ—Ç—å –±–æ—Ç–∞.

```bash
python main.py
```

–ü—ñ–¥ —á–∞—Å –∑–∞–ø—É—Å–∫—É —Å—Ç–∞—Ä—Ç—É—é—Ç—å —Ñ–æ–Ω–æ–≤—ñ –ø—Ä–æ—Ü–µ—Å–∏ —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—ó –∑ Google Sheets (`sync_loop`) —Ç–∞ –ø–ª–∞–Ω—É–≤–∞–ª—å–Ω–∏–∫ (`scheduler_loop`). [cite:26]

---

## ‚öôÔ∏è –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è
### 1) `.env`
–°–∫–æ–ø—ñ—é–π—Ç–µ `.env.example` —É `.env` —ñ –∑–∞–ø–æ–≤–Ω—ñ—Ç—å –∑–Ω–∞—á–µ–Ω–Ω—è. [cite:26]

–û–±–æ–≤‚Äô—è–∑–∫–æ–≤–æ:
- `BOT_TOKEN` ‚Äî —Ç–æ–∫–µ–Ω Telegram-–±–æ—Ç–∞. [cite:26]
- `SHEET_ID_PROD` ‚Äî ID Google Spreadsheet –¥–ª—è PROD. [cite:26]
- `SHEET_ID_TEST` ‚Äî ID Google Spreadsheet –¥–ª—è TEST. [cite:26]
- `ADMINS` ‚Äî Telegram ID –∞–¥–º—ñ–Ω—ñ–≤ —á–µ—Ä–µ–∑ –∫–æ–º—É. [cite:26]

–ß–∞—Å—Ç—ñ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è:
- `MODE` = `TEST` –∞–±–æ `PROD` (–¥–µ—Ñ–æ–ª—Ç: `TEST`). [cite:26]
- `SHEET_NAME` ‚Äî –Ω–∞–∑–≤–∞ –æ—Å–Ω–æ–≤–Ω–æ—ó –≤–∫–ª–∞–¥–∫–∏ (worksheet) (–¥–µ—Ñ–æ–ª—Ç: `–õ–Æ–¢–ò–ô`). [cite:26]
- `LOGS_SHEET_NAME` ‚Äî –Ω–∞–∑–≤–∞ –≤–∫–ª–∞–¥–∫–∏ –∂—É—Ä–Ω–∞–ª—É –ø–æ–¥—ñ–π (–¥–µ—Ñ–æ–ª—Ç: `–ü–û–î–Ü–á`). [cite:26]
- `TIMEZONE` ‚Äî (–¥–µ—Ñ–æ–ª—Ç: `Europe/Kyiv`). [cite:26]
- `WORK_START`, `WORK_END`, `BRIEF_TIME` ‚Äî —á–∞—Å–∏ —Ä–æ–±–æ—Ç–∏/–±—Ä–∏—Ñ—ñ–Ω–≥—É. [cite:26]
- `FUEL_RATE` ‚Äî –≤–∏—Ç—Ä–∞—Ç–∞ –ø–∞–ª–∏–≤–∞ (–ª/–≥–æ–¥). [cite:26]
- `FUEL_ALERT_THRESHOLD`, `FUEL_ALERT_COOLDOWN_MIN` ‚Äî –ø–æ—Ä—ñ–≥ —Ç–∞ –∞–Ω—Ç–∏-—Å–ø–∞–º –∞–ª–µ—Ä—Ç—ñ–≤. [cite:26]
- `STOP_REMINDER_MIN` ‚Äî –∑–∞ —Å–∫—ñ–ª—å–∫–∏ —Ö–≤–∏–ª–∏–Ω –¥–æ `WORK_END` –Ω–∞–≥–∞–¥—É–≤–∞—Ç–∏ –ø—Ä–æ ¬´–°–¢–û–ü¬ª. [cite:26]

### 2) `service_account.json`
–ü–æ–∫–ª–∞–¥—ñ—Ç—å `service_account.json` —É –∫–æ—Ä—ñ–Ω—å –ø—Ä–æ—î–∫—Ç—É (–ø–æ—Ä—É—á —ñ–∑ `main.py`) ‚Äî –≤—ñ–Ω –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è –¥–ª—è –¥–æ—Å—Ç—É–ø—É –¥–æ Google Sheets. [cite:26]

–¢–∞–∫–æ–∂ –Ω–∞–¥–∞–π—Ç–µ –¥–æ—Å—Ç—É–ø –¥–æ Google Spreadsheet email-–∞–¥—Ä–µ—Å—ñ service account (–≤–æ–Ω–∞ –≤—Å–µ—Ä–µ–¥–∏–Ω—ñ JSON). [cite:26]

### 3) –í–∏–º–æ–≥–∏ –¥–æ Google Sheet
- –ë–æ—Ç –∑–Ω–∞—Ö–æ–¥–∏—Ç—å —Ä—è–¥–æ–∫ ‚Äú—Å—å–æ–≥–æ–¥–Ω—ñ‚Äù —É –∫–æ–ª–æ–Ω—Ü—ñ A. [cite:26]
- –°–ø–∏—Å–æ–∫ –≤–æ–¥—ñ—ó–≤ —á–∏—Ç–∞—î—Ç—å—Å—è –∑ –∫–æ–ª–æ–Ω–∫–∏ AB (28), –ø–µ—Ä—Å–æ–Ω–∞–ª ‚Äî –∑ AC (29). [cite:26]

---

## üîê –ë–µ–∑–ø–µ–∫–∞
–ù–µ –∫–æ–º—ñ—Ç—å—Ç–µ `.env` —Ç–∞ `service_account.json` —É —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ–π. [cite:26]
